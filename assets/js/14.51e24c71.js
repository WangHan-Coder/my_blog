(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{428:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"函数组件的特点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#函数组件的特点"}},[t._v("#")]),t._v(" 函数组件的特点")]),t._v(" "),s("ul",[s("li",[t._v("没有组件实例")]),t._v(" "),s("li",[t._v("没有生命周期")]),t._v(" "),s("li",[t._v("没有state和setState，只能接收props")])]),t._v(" "),s("h2",{attrs:{id:"class组件的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class组件的问题"}},[t._v("#")]),t._v(" class组件的问题")]),t._v(" "),s("ul",[s("li",[t._v("大型组件很难拆分和重构，很难测试（即class不易拆分）")]),t._v(" "),s("li",[t._v("相同业务逻辑，分散到各个方法中，逻辑混乱（比如绑定和解绑事件分散在不同的生命周期中）")]),t._v(" "),s("li",[t._v("复用逻辑变得复杂，如Mixins（React中已废弃）、HOC、Render Prop")])]),t._v(" "),s("h2",{attrs:{id:"react组件更易用函数表达"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react组件更易用函数表达"}},[t._v("#")]),t._v(" React组件更易用函数表达")]),t._v(" "),s("ul",[s("li",[t._v("React提倡函数式编程，view = fn（props）")]),t._v(" "),s("li",[t._v("函数更灵活，更易拆分，更易测试")]),t._v(" "),s("li",[t._v("但函数组件太简单，需要增强能力 —— Hooks")])]),t._v(" "),s("h2",{attrs:{id:"react-hooks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-hooks"}},[t._v("#")]),t._v(" React Hooks")]),t._v(" "),s("ul",[s("li",[t._v("可选功能（class组件 vs Hooks）")]),t._v(" "),s("li",[t._v("100%向后兼容，没有破坏性改动")]),t._v(" "),s("li",[t._v("不会取代class组件，尚无计划要移除class组件")])]),t._v(" "),s("p",[t._v("hooks主要有哪些：")]),t._v(" "),s("ul",[s("li",[t._v("State Hook")]),t._v(" "),s("li",[t._v("Effect Hook")]),t._v(" "),s("li",[t._v("其它Hook")]),t._v(" "),s("li",[t._v("自定义Hook")])]),t._v(" "),s("h3",{attrs:{id:"为什么会有react-hooks-它解决了哪些问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么会有react-hooks-它解决了哪些问题"}},[t._v("#")]),t._v(" 为什么会有React Hooks，它解决了哪些问题？")]),t._v(" "),s("h3",{attrs:{id:"react-hooks如何模拟组件生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-hooks如何模拟组件生命周期"}},[t._v("#")]),t._v(" React Hooks如何模拟组件生命周期？")]),t._v(" "),s("h3",{attrs:{id:"如何自定义hook"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何自定义hook"}},[t._v("#")]),t._v(" 如何自定义Hook？")]),t._v(" "),s("h3",{attrs:{id:"react-hooks性能优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-hooks性能优化"}},[t._v("#")]),t._v(" React Hooks性能优化")]),t._v(" "),s("h3",{attrs:{id:"使用react-hooks遇到哪些坑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用react-hooks遇到哪些坑"}},[t._v("#")]),t._v(" 使用React Hooks遇到哪些坑？")]),t._v(" "),s("h3",{attrs:{id:"hooks相比hoc和render-prop有哪些优点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks相比hoc和render-prop有哪些优点"}},[t._v("#")]),t._v(" Hooks相比HOC和Render Prop有哪些优点？")]),t._v(" "),s("h2",{attrs:{id:"usestate-让函数组件实现state和setstate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usestate-让函数组件实现state和setstate"}},[t._v("#")]),t._v(" useState：让函数组件实现state和setState")]),t._v(" "),s("ul",[s("li",[t._v("默认函数组件没有state")]),t._v(" "),s("li",[t._v("函数组件是一个纯函数，执行完即销毁，无法存储state")]),t._v(" "),s("li",[t._v("需要State Hook，即把state功能“钩”到纯函数中")])]),t._v(" "),s("h2",{attrs:{id:"useeffect-让函数组件模拟生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useeffect-让函数组件模拟生命周期"}},[t._v("#")]),t._v(" useEffect：让函数组件模拟生命周期")]),t._v(" "),s("ul",[s("li",[t._v("默认函数组件没有生命周期")]),t._v(" "),s("li",[t._v("函数组件是一个纯函数，执行完即销毁，自己无法实现生命周期")]),t._v(" "),s("li",[t._v("使用Effect Hook把生命周期“钩”到纯函数中")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模拟 class 组件的 DidMount 和 DidUpdate")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'在此发送一个 ajax 请求'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模拟 class 组件的 DidMount")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'挂载完了'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模拟 class 组件的 DidUpdate")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'更新了'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模拟 class 组件的 willUnMount")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" timer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br")])]),s("p",[t._v("useEffect使用总结：")]),t._v(" "),s("ul",[s("li",[t._v("模拟componentDidMount - useEffect 依赖[]")]),t._v(" "),s("li",[t._v("模拟componentDidUpdate - useEffect 无依赖，或者依赖[a, b]")]),t._v(" "),s("li",[t._v("模拟componentWillUnMount - useEffect 中返回一个函数")])]),t._v(" "),s("p",[t._v("useEffect让纯函数有了副作用：")]),t._v(" "),s("ul",[s("li",[t._v("默认情况下，执行纯函数，输入参数，返回结果，无副作用")]),t._v(" "),s("li",[t._v("所谓副作用，就是对函数之外造成影响，如设置全局定时任务")]),t._v(" "),s("li",[t._v("而组件需要副作用，所有需要 useEffect “钩”入纯函数中")])]),t._v(" "),s("blockquote",[s("p",[t._v("技术和业务有“矛盾”，通常是技术向业务“妥协”")])])])}),[],!1,null,null,null);s.default=e.exports}}]);