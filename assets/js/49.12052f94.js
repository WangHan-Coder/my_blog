(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{471:function(v,t,_){"use strict";_.r(t);var e=_(1),a=Object(e.a)({},(function(){var v=this,t=v._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h2",{attrs:{id:"vue3架构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue3架构"}},[v._v("#")]),v._v(" vue3架构")]),v._v(" "),t("p",[v._v("Vue3源码采用"),t("strong",[v._v("monorepo")]),v._v("方式进行管理，将模块拆分到packages中，这样做的好处如下：")]),v._v(" "),t("ol",[t("li",[v._v("将多个模块集合到一个仓库，方便维护")]),v._v(" "),t("li",[v._v("方便版本管理和依赖管理，各模块间相互引用也比较方便")]),v._v(" "),t("li",[v._v("各个包可以单独安装使用，不需要导入整个vue")])]),v._v(" "),t("img",{attrs:{src:v.$withBase("/vue/vue3/vue3包构成.png"),alt:"图片加载失败"}}),v._v(" "),t("h2",{attrs:{id:"composition-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#composition-api"}},[v._v("#")]),v._v(" Composition API")]),v._v(" "),t("p",[v._v("vue2中"),t("code",[v._v("Options API")]),v._v("（即提供props、methods、data、computed、watch等属性供用户使用）的问题：")]),v._v(" "),t("ol",[t("li",[v._v("复用性比较差，虽然提供mixins和extends，但会出现数据来源不明确和重名问题")]),v._v(" "),t("li",[v._v("需要使用带有副作用"),t("code",[v._v("this")]),v._v("，存在this指向问题，同时对tree-shaking也不友好")])]),v._v(" "),t("p",[v._v("vue3"),t("code",[v._v("Composition API")]),v._v("特点：")]),v._v(" "),t("ol",[t("li",[v._v("方便抽离，复用性强")]),v._v(" "),t("li",[v._v("抛弃this，tree-shaking友好，打包出来体积更小")])]),v._v(" "),t("h2",{attrs:{id:"响应式系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#响应式系统"}},[v._v("#")]),v._v(" 响应式系统")]),v._v(" "),t("p",[v._v("vue3采用"),t("code",[v._v("proxy")]),v._v("替代了"),t("code",[v._v("Object.defineProperty")]),v._v(":")]),v._v(" "),t("ol",[t("li",[v._v("提升了性能，不再需要一次性全部递归拦截")]),v._v(" "),t("li",[v._v("能拦截到对象属性的新增和删除")]),v._v(" "),t("li",[v._v("能拦截原生数组的索引、length操作")])]),v._v(" "),t("h2",{attrs:{id:"diff算法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#diff算法"}},[v._v("#")]),v._v(" diff算法")]),v._v(" "),t("p",[v._v("vue3采用"),t("strong",[v._v("快速diff")]),v._v("（内部采用了一个最长递增子序列的算法）替换了vue2的"),t("strong",[v._v("双端diff")]),v._v("，优化了diff效率。")]),v._v(" "),t("h2",{attrs:{id:"渲染优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#渲染优化"}},[v._v("#")]),v._v(" 渲染优化")]),v._v(" "),t("p",[v._v("在渲染方面，vue3提供了"),t("strong",[v._v("自定义渲染器")]),v._v("，大大提升了扩展能力。")]),v._v(" "),t("h2",{attrs:{id:"编译优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译优化"}},[v._v("#")]),v._v(" 编译优化")]),v._v(" "),t("ul",[t("li",[v._v("Block和patchFlag：为动态节点打上补丁标志，即patchFlag，同时还提出了block的概念，block本质上是一个虚拟节点，但它会多出一个dynamicChildren数组，会收集它所有的动态子代节点，比对的时候会忽略DOM层级结构的，所以对于带有v-if、v-for等结构化指令的节点也作为block的角色。")]),v._v(" "),t("li",[v._v("静态提升：将静态虚拟的节点提升到render函数之外，这样能够减少更新时创建虚拟DOM带来的性能开销和内存占用。")]),v._v(" "),t("li",[v._v("预字符串化：在静态提升的基础上，当模板中包含大量连续纯静态的标签节点时，将这样静态节点序列化成字符串，然后通过innerHTML进行设置，这样做能够减少创建虚拟节点产生的性能开销和内存占用。")]),v._v(" "),t("li",[v._v("缓存内联事件处理函数：可以避免不必要的更新")]),v._v(" "),t("li",[v._v("v-once指令：缓存虚拟节点，避免组件更新时重新创建虚拟DOM的性能开销，同时带有v-once指令的节点不会被父级block收集，所以不会参与diff操作，避免无用的diff开销。")])]),v._v(" "),t("h2",{attrs:{id:"新增组件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新增组件"}},[v._v("#")]),v._v(" 新增组件")]),v._v(" "),t("ul",[t("li",[v._v("Teleport：可以将指定内容渲染到特定容器中，而不受DOM层级的限制。")])]),v._v(" "),t("h2",{attrs:{id:"对typescript支持更加友好"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#对typescript支持更加友好"}},[v._v("#")]),v._v(" 对TypeScript支持更加友好")]),v._v(" "),t("p",[v._v("vue2源码采用Flow做类型检测，对TypeScript支持并不友好，而Vue3采用TypeScript进行重写，对TS的支持更加友好。")])])}),[],!1,null,null,null);t.default=a.exports}}]);