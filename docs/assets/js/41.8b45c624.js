(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{540:function(t,s,a){"use strict";a.r(s);var n=a(5),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"函数组件的特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数组件的特点"}},[t._v("#")]),t._v(" 函数组件的特点")]),t._v(" "),a("ul",[a("li",[t._v("没有组件实例")]),t._v(" "),a("li",[t._v("没有生命周期")]),t._v(" "),a("li",[t._v("没有state和setState，只能接收props")])]),t._v(" "),a("h2",{attrs:{id:"class组件的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class组件的问题"}},[t._v("#")]),t._v(" class组件的问题")]),t._v(" "),a("ul",[a("li",[t._v("大型组件很难拆分和重构，很难测试（即class不易拆分）")]),t._v(" "),a("li",[t._v("相同业务逻辑，分散到各个方法中，逻辑混乱（比如绑定和解绑事件分散在不同的生命周期中）")]),t._v(" "),a("li",[t._v("复用逻辑变得复杂，如Mixins（React中已废弃）、HOC、Render Prop")])]),t._v(" "),a("h2",{attrs:{id:"react组件更易用函数表达"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react组件更易用函数表达"}},[t._v("#")]),t._v(" React组件更易用函数表达")]),t._v(" "),a("ul",[a("li",[t._v("React提倡函数式编程，view = fn（props）")]),t._v(" "),a("li",[t._v("函数更灵活，更易拆分，更易测试")]),t._v(" "),a("li",[t._v("但函数组件太简单，需要增强能力 —— Hooks")])]),t._v(" "),a("h2",{attrs:{id:"react-hooks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-hooks"}},[t._v("#")]),t._v(" React Hooks")]),t._v(" "),a("ul",[a("li",[t._v("可选功能（class组件 vs Hooks）")]),t._v(" "),a("li",[t._v("100%向后兼容，没有破坏性改动")]),t._v(" "),a("li",[t._v("不会取代class组件，尚无计划要移除class组件")])]),t._v(" "),a("p",[t._v("hooks主要有哪些：")]),t._v(" "),a("ul",[a("li",[t._v("State Hook")]),t._v(" "),a("li",[t._v("Effect Hook")]),t._v(" "),a("li",[t._v("其它Hook")]),t._v(" "),a("li",[t._v("自定义Hook")])]),t._v(" "),a("h3",{attrs:{id:"为什么会有react-hooks-它解决了哪些问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么会有react-hooks-它解决了哪些问题"}},[t._v("#")]),t._v(" 为什么会有React Hooks，它解决了哪些问题？")]),t._v(" "),a("h3",{attrs:{id:"react-hooks如何模拟组件生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-hooks如何模拟组件生命周期"}},[t._v("#")]),t._v(" React Hooks如何模拟组件生命周期？")]),t._v(" "),a("h3",{attrs:{id:"如何自定义hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何自定义hook"}},[t._v("#")]),t._v(" 如何自定义Hook？")]),t._v(" "),a("h3",{attrs:{id:"react-hooks性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-hooks性能优化"}},[t._v("#")]),t._v(" React Hooks性能优化")]),t._v(" "),a("h3",{attrs:{id:"使用react-hooks遇到哪些坑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用react-hooks遇到哪些坑"}},[t._v("#")]),t._v(" 使用React Hooks遇到哪些坑？")]),t._v(" "),a("h3",{attrs:{id:"hooks相比hoc和render-prop有哪些优点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hooks相比hoc和render-prop有哪些优点"}},[t._v("#")]),t._v(" Hooks相比HOC和Render Prop有哪些优点？")]),t._v(" "),a("h2",{attrs:{id:"usestate-让函数组件实现state和setstate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usestate-让函数组件实现state和setstate"}},[t._v("#")]),t._v(" useState：让函数组件实现state和setState")]),t._v(" "),a("ul",[a("li",[t._v("默认函数组件没有state")]),t._v(" "),a("li",[t._v("函数组件是一个纯函数，执行完即销毁，无法存储state")]),t._v(" "),a("li",[t._v("需要State Hook，即把state功能“钩”到纯函数中")])]),t._v(" "),a("h2",{attrs:{id:"useeffect-让函数组件模拟生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#useeffect-让函数组件模拟生命周期"}},[t._v("#")]),t._v(" useEffect：让函数组件模拟生命周期")]),t._v(" "),a("ul",[a("li",[t._v("默认函数组件没有生命周期")]),t._v(" "),a("li",[t._v("函数组件是一个纯函数，执行完即销毁，自己无法实现生命周期")]),t._v(" "),a("li",[t._v("使用Effect Hook把生命周期“钩”到纯函数中")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模拟 class 组件的 DidMount 和 DidUpdate")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'在此发送一个 ajax 请求'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模拟 class 组件的 DidMount")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'挂载完了'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模拟 class 组件的 DidUpdate")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'更新了'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模拟 class 组件的 willUnMount")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" timer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br")])]),a("p",[t._v("useEffect使用总结：")]),t._v(" "),a("ul",[a("li",[t._v("模拟componentDidMount - useEffect 依赖[]")]),t._v(" "),a("li",[t._v("模拟componentDidUpdate - useEffect 无依赖，或者依赖[a, b]")]),t._v(" "),a("li",[t._v("模拟componentWillUnMount - useEffect 中返回一个函数")])]),t._v(" "),a("p",[t._v("useEffect让纯函数有了副作用：")]),t._v(" "),a("ul",[a("li",[t._v("默认情况下，执行纯函数，输入参数，返回结果，无副作用")]),t._v(" "),a("li",[t._v("所谓副作用，就是对函数之外造成影响，如设置全局定时任务")]),t._v(" "),a("li",[t._v("而组件需要副作用，所有需要 useEffect “钩”入纯函数中")])]),t._v(" "),a("blockquote",[a("p",[t._v("技术和业务有“矛盾”，通常是技术向业务“妥协”")])])])}),[],!1,null,null,null);s.default=e.exports}}]);